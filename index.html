<html>
<head>
  <link href="https://fonts.googleapis.com/css?family=Raleway:400,700" rel="stylesheet">
  <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" type="text/css" href="style.css">

  <script>
    //This generates a csv of provided data)
    var data = [["name1", "city1", "some other info"], ["name2", "city2", "more info"]];
    var csvContent = "data:text/csv;charset=utf-8,";
    data.forEach(function (infoArray, index) {

      dataString = infoArray.join(",");
      csvContent += index < data.length ? dataString + "\n" : dataString;

      var encodedUri = encodeURI(csvContent);
      //window.open(encodedUri);

    });
  </script>

  <script type="text/template" id="data_template">

    <div class="mp-ctn panel panel-default">
      <div class="panel panel-heading first-ctn">
        <% if (party_name == "NDP") { %>
        <div><img height="22" src="images/ndp-logo.png"/></div>
        <% } %>
        <% if (party_name == "Liberal") { %>
        <div><img height="22" src="images/liberal-logo.png"/></div>
        <%}%>
        <% if (party_name == "Conservative") { %>
        <div><img height="22" src="images/conservative-logo.png"/></div>
        <%}%>
        <% if (party_name == "Green Party") { %>
        <div><img height="22" src="images/green-logo.gif"/></div>
        <%}%>
        <% if (party_name == "Bloc Québécois") { %>
        <div><img height="22" src="images/bloc-logo.png"/></div>
        <%}%>
        <span class="mp-name panel-title"><%= name %></span>
      </div>
      <div class="panel-body">
        <div class="second-ctn">
          <div class="mp-party"><p>
            <% if (party_name == "NDP") { %>
            <span><%= party_name %></span>
            <% } %>
            <% if (party_name == "Liberal") { %>
            <span><%= party_name %></span>
            <% } %>
            <% if (party_name == "Conservative") { %>
            <span><%= party_name %></span>
            <% } %>
            <% if (party_name == "Green Party") { %>
            <span><%= party_name %></span>
            <%}%>
            <% if (party_name == "Bloc Québécois") { %>
            <span><%= party_name %></span>
            <%}%>
          </p></div>
          <div class="mp-district"><p><%= district_name %></div>
          <div class="mp-mail"><p><a href="mailto:<%= email %>"><%= email %></a></p></div>
        </div>

        <div class="mp-info third-ctn">
          <% _.each(offices, function(office){ //Loops through office data %>
          <div>
            <p><span class="office"><%= office.type %></span></p>
            <p>Phone: <%= office.tel %></p>
            <p>Fax: <%= office.fax %></p>
            <p>Address:<br> <%= office.postal %></p>
            <% if (office !== offices[offices.length-1]) { %>
          </div>
          <%}%>
          <% }); %>
        </div>
      </div>
    </div>
  </script>
</head>
<body>
<section class="data">
  <div class="data_container">
    <div class="filters">
      <label>Filter by party</label>
      <select id="party-filter">
        <option value="Reset">Reset Filter</option>
        <option value="Liberal">Liberal</option>
        <option value="Conservative">Conservative</option>
        <option value="NDP">NDP</option>
        <option value="Bloc Québécois">Bloc Québécois</option>
        <option value="Green Party">Green Party</option>
      </select>
      <!--  <label>Filter by riding</label>
        <input id="riding-filter" type=""/>
        <button class="btn btn-primary" id="riding-submit">Find my MP</button>-->
    </div>
    <table class="table table-striped table-responsive">
      <tbody class="data_row"></tbody>
    </table>
  </div>
</section>
</body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/backbone.js/1.3.3/backbone-min.js"></script>
<script src="assets/csvGen/app.js"></script>
</html>